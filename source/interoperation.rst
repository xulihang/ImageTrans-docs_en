
与第三方软件的交互
==================================================

PSD相关
------------------

ImageTrans支持利用脚本调用Photoshop来实现互操作。

说明：如果是Windows系统并安装了完整版Photoshop，ImageTrans提供exe脚本工具，可以自动打开PS。其它情况需要自行打开PS，点击“文件-脚本-浏览”选择脚本进行操作。

Photoshop脚本仓库：`<https://github.com/xulihang/ImageTrans_PhotoshopScripts>`_

PSD转JPG
+++++++++++++

软件不能直接显示PSD，需要先将PSD转换为JPG。

通过菜单-工具-PSD转JPG打开转换工具，调用Photoshop批量进行转换。

非Windows则使用提供的JSX脚本：pdf2jpg.jsx，选择需要进行转换的目录进行转换。

从PSD读取文字区域
++++++++++++++++++++++++++

如果处理的是PSD文件，可以从PSD文件读取其中的文字图层的坐标、大小和文本，显示在ImageTrans中，并且回填时会自动替换文本，不用生成覆盖层。点击菜单-编辑-从PSD读取文字图层（若存在）进行操作。

非Windows则使用提供的JSX脚本：readTextLayers.jsx，选择目录进行导出，之后点击菜单-项目-导入用PS脚本导出的文字区域信息进行导入。

读取字体名称
+++++++++++++++

在字体设置时需要填写PS专用格式的字体名称，可以使用readFont.jsx进行读取。该脚本会读取第一个文本框的字体信息。

生成PSD
+++++++++++++++

图片翻译完成后，可以生成PSD文件供精细调整。点击菜单-生成可编辑的PSD文件调出生成选项对话框。

以下是选项的说明：

* 存在PSD - 直接操作原来的PSD文件，PSD文件需要和JPG文件存放在一起。不选则会从JPG文件生成PSD。
* 使用译文替换 - 不选则使用原来的文本。
* 添加覆盖层 - 添加覆盖层以遮住原来的文字。如果对应PSD中的文字图层，则不会添加覆盖层。
* 使用精确模式 - 非精确模式下覆盖层是一个矩形框，精确模式下软件会根据背景信息精确生成覆盖层，但会耗费较长时间。
* 水平翻转图像 - 适用于中文漫画翻译为日语漫画的情况
* 使用点文字 - 所有文本框都设置为点文本，适用于不需要自动换行和文字超出文本框范围的情况
* 仅导出 - 仅导出数据文件，暂不执行生成操作

.. image:: /images/generating_options.jpg

生成完成后会跳出提示窗口，请耐心等待。期间可以切换到PS的窗口查看正在进行的操作，如果PS提出相关操作，需要人工处理。

非Windows请使用脚本：addLayers.jsx。

其它
------------------

使用文件-导出功能可以将文字导出为docx文档供翻译，并支持导回操作。

另外，本工具的项目文件以json格式存储，会编程的朋友可以自由进行处理。